# Ralph Orchestrator Configuration for Claude
# v2 nested format - optimized for Claude Code CLI

# Event loop settings
event_loop:
  completion_promise: "LOOP_COMPLETE"
  max_iterations: 100
  max_runtime_seconds: 14400      # 4 hours
  idle_timeout_secs: 1800

# CLI backend settings
cli:
  backend: "claude"
  prompt_mode: "arg"              # Pass prompt as CLI argument

# Core behaviors (always injected into prompts)
core:
  specs_dir: "./specs/"
  guardrails:
    - "Fresh context each iteration - save learnings to memories for next time"
    - "Don't assume 'not implemented' - search first"
    - "Verification is mandatory - tests/typecheck/lint/audit must pass"
    - "Confidence protocol: score decisions 0-100. >80 proceed autonomously; 50-80 proceed + document in .ralph/agent/decisions.md; <50 choose safe default + document."

# Default hats: planner and builder
# These are registered automatically if no custom hats are defined.
# Uncomment and modify to customize or add additional hats.
#
# hats:
#   planner:
#     name: "Planner"
#     triggers: ["task.start", "build.done", "build.blocked"]
#     publishes: ["build.task"]
#     instructions: ""            # Empty = use default rich prompt
#
#   builder:
#     name: "Builder"
#     triggers: ["build.task"]
#     publishes: ["build.done", "build.blocked"]
#     instructions: ""            # Empty = use default rich prompt
#
#   # Example: Add a reviewer hat
#   reviewer:
#     name: "Reviewer"
#     triggers: ["review.request"]
#     publishes: ["review.done", "review.rejected"]
#     instructions: |
#       Review the implementation for correctness, style, and security.
#       If good: publish review.done
#       If problems: publish review.rejected with specific feedback
