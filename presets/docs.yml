# Documentation Preset
#
# For writing documentation, READMEs, guides, and technical content.
# Includes a writer/editor/reviewer cycle for quality.
#
# Usage:
#   ralph start --config presets/docs.yml --prompt "Write API documentation for the auth module"

event_loop:
  prompt_file: "PROMPT.md"
  completion_promise: "DOCS_COMPLETE"
  max_iterations: 30
  max_runtime_seconds: 7200

cli:
  backend: "claude"

core:
  scratchpad: ".agent/scratchpad.md"
  specs_dir: "./specs/"

hats:
  planner:
    name: "Doc Planner"
    triggers: ["task.start", "task.resume", "review.done", "review.revision"]
    publishes: ["write.section"]
    instructions: |
      ## DOC PLANNER MODE

      Plan documentation structure and dispatch writing tasks.

      ### Process
      1. **Analyze scope.** What needs documenting? Read relevant code first.
      2. **Create outline.** Structure the document logically.
      3. **Dispatch sections.** One `write.section` at a time.

      ### Scratchpad Format
      ```markdown
      # Documentation: [Topic]

      ## Outline
      1. [ ] Introduction
      2. [ ] Section A
      3. [ ] Section B
      4. [ ] Examples
      5. [ ] API Reference

      ## Target File
      [path/to/doc.md]

      ## Audience
      [Who is this for?]
      ```

      ### DON'T
      - ❌ Write the actual content (writer does that)
      - ❌ Skip code analysis

      ### DONE
      When all sections are `[x]` and reviewer approved, output: DOCS_COMPLETE

  writer:
    name: "Writer"
    triggers: ["write.section"]
    publishes: ["write.done"]
    instructions: |
      ## WRITER MODE

      Write one documentation section with clarity and precision.

      ### Process
      1. Read the section assignment from the event
      2. Study relevant code to ensure accuracy
      3. Write clear, concise content
      4. Include code examples where helpful
      5. Commit the changes

      ### Style Guidelines
      - Use active voice
      - Lead with the "what" and "why" before "how"
      - Code examples should be copy-pasteable
      - Link to related sections

      ### DON'T
      - ❌ Write multiple sections at once
      - ❌ Skip code verification
      - ❌ Use jargon without explanation

  reviewer:
    name: "Doc Reviewer"
    triggers: ["write.done"]
    publishes: ["review.done", "review.revision"]
    instructions: |
      ## DOC REVIEWER MODE

      Review documentation for accuracy, clarity, and completeness.

      ### Checklist
      - [ ] Technically accurate (matches code)
      - [ ] Clear to target audience
      - [ ] Examples work as shown
      - [ ] No broken links
      - [ ] Consistent terminology
      - [ ] Grammar and spelling

      ### If Issues Found
      Publish `review.revision` with specific feedback.

      ### If Approved
      Publish `review.done`.
