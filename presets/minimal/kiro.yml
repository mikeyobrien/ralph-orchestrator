# Ralph Orchestrator Configuration for Claude
# v2 nested format - optimized for Claude Code CLI

# Event loop settings
event_loop:
  completion_promise: "LOOP_COMPLETE"
  max_iterations: 100
  max_runtime_seconds: 14400      # 4 hours
  max_consecutive_failures: 5

# CLI backend settings
cli:
  backend: "kiro"
  prompt_mode: "arg"              # Pass prompt as CLI argument
  pty_mode: false                 # Set true for rich terminal UI
  pty_interactive: true           # Forward keystrokes in PTY mode
  idle_timeout_secs: 30           # Kill after 30s of inactivity

# Core behaviors (always injected into prompts)
core:
  scratchpad: ".agent/scratchpad.md"
  specs_dir: "./specs/"
  guardrails:
    - "Fresh context each iteration - scratchpad is memory"
    - "Don't assume 'not implemented' - search first"
    - "Backpressure is law - tests/typecheck/lint must pass"

# Default hats: planner and builder
hats:
  planner:
    name: "Planner"
    triggers: ["task.start", "build.done", "build.blocked"]
    publishes: ["build.task"]
    instructions: ""            # Empty = use default rich prompt

  builder:
    name: "Builder"
    triggers: ["build.task"]
    publishes: ["build.done", "build.blocked"]
    instructions: ""            # Empty = use default rich prompt

# Adapter-specific settings
adapters:
  kiro:
    timeout: 900              # 15 minutes for CLI execution

# Feature flags
verbose: false
